{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/ethan/Sites/wpx/wesbos-hooks/frontend/components/RemoveFromCart.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation REMOVE_FROM_CART_MUTATION($id: ID!) {\\n    removeFromCart(id: $id) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport { CURRENT_USER_QUERY } from \"./User\";\nvar REMOVE_FROM_CART_MUTATION = gql(_templateObject());\nvar BigButton = styled.button.withConfig({\n  displayName: \"RemoveFromCart__BigButton\",\n  componentId: \"emvtd6-0\"\n})([\"font-size:3rem;background:none;border:0;&:hover{color:\", \";cursor:pointer;}\"], function (props) {\n  return props.theme.red;\n});\n\nvar RemoveFromCart = function RemoveFromCart(props) {\n  // this gets called as soon as we get a response back from the server after a mutation has been performed\n  var update = function update(cache, payload) {\n    // read cache\n    var data = cache.readQuery({\n      query: CURRENT_USER_QUERY\n    }); // remove item from the cart\n\n    var cartItemId = payload.data.removeFromCart.id; // what we get back from the mutation\n\n    data.me.cart = data.me.cart.filter(function (eachCartItem) {\n      return eachCartItem.id != cartItemId;\n    }); // write it back to the cache\n\n    cache.writeQuery({\n      query: CURRENT_USER_QUERY,\n      data: data\n    });\n  };\n\n  return __jsx(Mutation, {\n    optimisticResponse: {\n      __typename: 'Mutation',\n      removeFromCart: {\n        __typename: 'CartItem',\n        id: props.id\n      }\n    },\n    update: update,\n    variables: {\n      id: props.id\n    },\n    mutation: REMOVE_FROM_CART_MUTATION,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, function (removeFromCart, _ref) {\n    var data = _ref.data,\n        error = _ref.error,\n        loading = _ref.loading;\n    return __jsx(BigButton, {\n      disabled: loading,\n      onClick: function onClick() {\n        return removeFromCart();\n      },\n      title: \"Delete Item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"\\xD7\");\n  });\n};\n\nexport default RemoveFromCart;","map":{"version":3,"sources":["/Users/ethan/Sites/wpx/wesbos-hooks/frontend/components/RemoveFromCart.js"],"names":["Mutation","gql","styled","CURRENT_USER_QUERY","REMOVE_FROM_CART_MUTATION","BigButton","button","props","theme","red","RemoveFromCart","update","cache","payload","data","readQuery","query","cartItemId","removeFromCart","id","me","cart","filter","eachCartItem","writeQuery","__typename","error","loading"],"mappings":";;;;;;;;;;;;;;;AAAA,SAASA,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,kBAAT,QAAmC,QAAnC;AAEA,IAAMC,yBAAyB,GAAGH,GAAH,mBAA/B;AAQA,IAAMI,SAAS,GAAGH,MAAM,CAACI,MAAV;AAAA;AAAA;AAAA,oFAKF,UAAAC,KAAK;AAAA,SAAIA,KAAK,CAACC,KAAN,CAAYC,GAAhB;AAAA,CALH,CAAf;;AAUA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAH,KAAK,EAAI;AAC9B;AACA,MAAMI,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAQC,OAAR,EAAoB;AACjC;AAEA,QAAMC,IAAI,GAAGF,KAAK,CAACG,SAAN,CAAgB;AAAEC,MAAAA,KAAK,EAAEb;AAAT,KAAhB,CAAb,CAHiC,CAKjC;;AAEA,QAAMc,UAAU,GAAGJ,OAAO,CAACC,IAAR,CAAaI,cAAb,CAA4BC,EAA/C,CAPiC,CAOiB;;AAElDL,IAAAA,IAAI,CAACM,EAAL,CAAQC,IAAR,GAAeP,IAAI,CAACM,EAAL,CAAQC,IAAR,CAAaC,MAAb,CACb,UAAAC,YAAY;AAAA,aAAIA,YAAY,CAACJ,EAAb,IAAmBF,UAAvB;AAAA,KADC,CAAf,CATiC,CAajC;;AAEAL,IAAAA,KAAK,CAACY,UAAN,CAAiB;AACbR,MAAAA,KAAK,EAAEb,kBADM;AAEbW,MAAAA,IAAI,EAAEA;AAFO,KAAjB;AAID,GAnBD;;AAqBA,SACE,MAAC,QAAD;AACI,IAAA,kBAAkB,EAAE;AAChBW,MAAAA,UAAU,EAAE,UADI;AAEhBP,MAAAA,cAAc,EAAE;AACZO,QAAAA,UAAU,EAAE,UADA;AAEZN,QAAAA,EAAE,EAAEZ,KAAK,CAACY;AAFE;AAFA,KADxB;AAQE,IAAA,MAAM,EAAER,MARV;AASE,IAAA,SAAS,EAAE;AAAEQ,MAAAA,EAAE,EAAEZ,KAAK,CAACY;AAAZ,KATb;AAUE,IAAA,QAAQ,EAAEf,yBAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAYG,UAACc,cAAD;AAAA,QAAmBJ,IAAnB,QAAmBA,IAAnB;AAAA,QAAyBY,KAAzB,QAAyBA,KAAzB;AAAA,QAAgCC,OAAhC,QAAgCA,OAAhC;AAAA,WACC,MAAC,SAAD;AACE,MAAA,QAAQ,EAAEA,OADZ;AAEE,MAAA,OAAO,EAAE;AAAA,eAAMT,cAAc,EAApB;AAAA,OAFX;AAGE,MAAA,KAAK,EAAC,aAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD;AAAA,GAZH,CADF;AAwBD,CA/CD;;AAiDA,eAAeR,cAAf","sourcesContent":["import { Mutation } from \"react-apollo\"\nimport gql from \"graphql-tag\"\nimport styled from \"styled-components\"\nimport { CURRENT_USER_QUERY } from \"./User\"\n\nconst REMOVE_FROM_CART_MUTATION = gql`\n  mutation REMOVE_FROM_CART_MUTATION($id: ID!) {\n    removeFromCart(id: $id) {\n      id\n    }\n  }\n`\n\nconst BigButton = styled.button`\n  font-size: 3rem;\n  background: none;\n  border: 0;\n  &:hover {\n    color: ${props => props.theme.red};\n    cursor: pointer;\n  }\n`\n\nconst RemoveFromCart = props => {\n  // this gets called as soon as we get a response back from the server after a mutation has been performed\n  const update = (cache, payload) => {\n    // read cache\n\n    const data = cache.readQuery({ query: CURRENT_USER_QUERY })\n\n    // remove item from the cart\n\n    const cartItemId = payload.data.removeFromCart.id // what we get back from the mutation\n\n    data.me.cart = data.me.cart.filter(\n      eachCartItem => eachCartItem.id != cartItemId\n    )\n\n    // write it back to the cache\n\n    cache.writeQuery({\n        query: CURRENT_USER_QUERY,\n        data: data\n    })\n  }\n\n  return (\n    <Mutation\n        optimisticResponse={{\n            __typename: 'Mutation',\n            removeFromCart: {\n                __typename: 'CartItem',\n                id: props.id\n            }\n        }}\n      update={update}\n      variables={{ id: props.id }}\n      mutation={REMOVE_FROM_CART_MUTATION}\n    >\n      {(removeFromCart, { data, error, loading }) => (\n        <BigButton\n          disabled={loading}\n          onClick={() => removeFromCart()}\n          title=\"Delete Item\"\n        >\n          &times;\n        </BigButton>\n      )}\n    </Mutation>\n  )\n}\n\nexport default RemoveFromCart\n"]},"metadata":{},"sourceType":"module"}