{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{19:function(e,t,n){\"use strict\";t.a=function(e){var t={style:\"currency\",currency:\"USD\",minimumFractionDigits:2};return e%100==0&&(t.minimumFractionDigits=0),new Intl.NumberFormat(\"en-US\",t).format(e/100)}},22:function(e,t,n){e.exports=n(57)},226:function(e,t,n){\"use strict\";n.r(t);var r=n(0),i=n.n(r),a=n(12),o=n.n(a),u=n(5),c=n(6),l=n.n(c),d=n(4),m=(n(18),d.default.h3.withConfig({displayName:\"Title\",componentId:\"sc-16nq74k-0\"})([\"margin:0 1rem;text-align:center;transform:skew(-5deg) rotate(-1deg);margin-top:-3rem;text-shadow:2px 2px 0 rgba(0,0,0,0.1);a{background:\",\";display:inline;line-height:1.3;font-size:4rem;text-align:center;color:white;padding:0 1rem;}\"],function(e){return e.theme.red})),f=d.default.div.withConfig({displayName:\"ItemStyles__Item\",componentId:\"sc-16pk14u-0\"})([\"background:white;border:1px solid \",\";box-shadow:\",\";position:relative;display:flex;flex-direction:column;img{width:100%;height:400px;object-fit:cover;}p{font-size:12px;line-height:2;font-weight:300;flex-grow:1;padding:0 3rem;font-size:1.5rem;}.buttonList{display:grid;width:100%;border-top:1px solid \",\";grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:1px;background:\",\";& > *{background:white;border:0;font-size:1rem;padding:1rem;}}\"],function(e){return e.theme.offWhite},function(e){return e.theme.bs},function(e){return e.theme.lightgrey},function(e){return e.theme.lightgrey}),p=d.default.span.withConfig({displayName:\"PriceTag\",componentId:\"nwbk6t-0\"})([\"background:\",\";transform:rotate(3deg);color:white;font-weight:600;padding:5px;line-height:1;font-size:3rem;display:inline-block;position:absolute;top:-3px;right:-3px;\"],function(e){return e.theme.red}),s=n(19),g=n(7);function y(e){return(y=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([\"\\n  mutation DELETE_ITEM_MUTATION($id: ID!) {\\n    deleteItem(id: $id) {\\n      id\\n    }\\n  }\\n\"]);return w=function(){return e},e}var x=l()(w()),_=function(e){function t(){var e,n,r,i,a,o,u;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return r=this,n=!(i=(e=b(t)).call.apply(e,[this].concat(l)))||\"object\"!==y(i)&&\"function\"!=typeof i?E(r):i,a=E(n),u=function(e,t){var n=e.readQuery({query:Q});console.log(n,t),n.items=n.items.filter(function(e){return e.id!==t.data.deleteItem.id}),e.writeQuery({query:Q,data:n})},(o=\"update\")in a?Object.defineProperty(a,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[o]=u,n}var n,a,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r[\"Component\"]),n=t,(a=[{key:\"render\",value:function(){var e=this;return i.a.createElement(u.Mutation,{mutation:x,variables:{id:this.props.id},refetchQueries:[{query:g.a}],update:this.update},function(t,n){n.error;return i.a.createElement(\"button\",{onClick:function(){confirm(\"Are you sure you want to delete this item?\")&&t().catch(function(e){alert(e.message)})}},e.props.children)})}}])&&h(n.prototype,a),o&&h(n,o),t}();function I(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([\"\\n  mutation ADD_TO_CART_MUTATION($id: ID!) {\\n    addToCart(id: $id) {\\n      id\\n      item {\\n        description\\n        id\\n        image\\n        price\\n        title\\n      }\\n      quantity\\n    }\\n  }\\n\"]);return I=function(){return e},e}var O=l()(I()),k=function(e){return i.a.createElement(u.Mutation,{optimisticResponse:{__typename:\"Mutation\",addToCart:{__typename:\"CartItem\",id:e.item.id,item:{__typename:\"Item\",description:e.item.description,id:e.item.id,image:e.item.image,price:e.item.price,title:e.item.title},quantity:1}},update:function(t,n){var r=t.readQuery({query:g.a}),i=n.data.addToCart;r.me.cart.find(function(t){return t.item.id===e.item.id})||(i.quantity=1,r.me.cart.push(i)),t.writeQuery({query:g.a,data:r})},mutation:O,refetchQueries:[{query:g.a}],variables:{id:e.item.id}},function(e,t){t.data,t.error;var n=t.loading;return i.a.createElement(\"button\",{disabled:n,onClick:e},\"Add\",n&&\"ing\",\" to Cart 🛒\")})},j=function(e){var t=e.item;return i.a.createElement(f,null,t.image&&i.a.createElement(\"img\",{src:t.image,alt:t.title}),i.a.createElement(m,null,i.a.createElement(o.a,{href:{pathname:\"/item\",query:{id:t.id}}},i.a.createElement(\"a\",null,t.title))),i.a.createElement(p,null,Object(s.a)(t.price)),i.a.createElement(\"p\",null,t.description),i.a.createElement(\"div\",{className:\"buttonList\"},i.a.createElement(o.a,{href:{pathname:\"/update\",query:{id:t.id}}},i.a.createElement(\"a\",null,\"Edit ✏\")),i.a.createElement(k,{item:t}),i.a.createElement(_,{id:t.id},\"Delete Item\")))},q=n(22),C=n.n(q),T=d.default.div.withConfig({displayName:\"PaginationStyles\",componentId:\"aduuar-0\"})([\"text-align:center;display:inline-grid;grid-template-columns:repeat(4,auto);align-items:stretch;justify-content:center;align-content:center;margin:2rem 0;border:1px solid \",\";border-radius:10px;& > *{margin:0;padding:15px 30px;border-right:1px solid \",\";&:last-child{border-right:0;}}a[aria-disabled='true']{color:grey;pointer-events:none;}\"],function(e){return e.theme.lightgrey},function(e){return e.theme.lightgrey}),P=n(26);function N(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([\"\\n  query PAGINATION_QUERY {\\n    itemsConnection {\\n      aggregate {\\n        count\\n      }\\n    }\\n  }\\n\"]);return N=function(){return e},e}var z=l()(N()),S=function(e){return i.a.createElement(u.Query,{query:z},function(t){t.error;var n=t.loading,r=t.data;if(n)return i.a.createElement(\"p\",null,\"Loading...\");var a=r.itemsConnection.aggregate.count,u=Math.ceil(a/P.a),c=e.page;return i.a.createElement(T,null,i.a.createElement(C.a,null,i.a.createElement(\"title\",null,\"Provision - Page \",e.page,\" of \",u,\" \")),i.a.createElement(o.a,{prefetch:!0,href:{pathname:\"items\",query:{page:c-1}}},i.a.createElement(\"a\",{className:\"prev\",\"aria-disabled\":c<=1},\"Prev\")),i.a.createElement(\"p\",null,c||1,\" of \",u),i.a.createElement(\"p\",null,a,\" items total\"),i.a.createElement(o.a,{prefetch:!0,href:{pathname:\"items\",query:{page:c+1}}},i.a.createElement(\"a\",{className:\"next\",\"aria-disabled\":c>=u},\"Next\")))})};function A(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([\"\\n  query ALL_ITEMS_QUERY($skip: Int = 0, $first: Int = \",\") {\\n    items(first: $first, skip: $skip) {\\n      id\\n      title\\n      price\\n      description\\n      image\\n      largeImage\\n    }\\n  }\\n\"]);return A=function(){return e},e}var Q=l()(A(),P.a),D=d.default.div.withConfig({displayName:\"Items__Center\",componentId:\"tikday-0\"})([\"text-align:center;\"]),L=d.default.div.withConfig({displayName:\"Items__ItemsList\",componentId:\"tikday-1\"})([\"display:grid;grid-template-columns:1fr 1fr;grid-gap:60px;max-width:\",\";margin:0 auto;\"],function(e){return e.theme.maxWidth}),M=function(e){return i.a.createElement(D,null,i.a.createElement(S,{page:e.page}),i.a.createElement(u.Query,{query:Q,variables:{skip:e.page*P.a-P.a}},function(e){var t=e.data,n=e.error;return e.loading?i.a.createElement(\"p\",null,\"Loading...\"):n?i.a.createElement(\"p\",null,\"Error: \",n.message):i.a.createElement(L,null,t.items.map(function(e){return i.a.createElement(j,{key:e.id,item:e},e.title)}))}),i.a.createElement(S,{page:e.page}))};t.default=function(e){return i.a.createElement(\"div\",null,i.a.createElement(M,{page:parseFloat(e.query.page)||1}))}},26:function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return r}),n.d(t,\"a\",function(){return i});var r=\"https://backend.ethansmith.now.sh\",i=4},483:function(e,t,n){__NEXT_REGISTER_PAGE(\"/items\",function(){return e.exports=n(484),{page:e.exports.default}})},484:function(e,t,n){\"use strict\";n.r(t);var r=n(226);t.default=r.default}},[[483,1,0]]]);","extractedComments":[]}